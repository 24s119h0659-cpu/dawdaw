<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ëœë¤ ë£°ë ›</title>
<style>
  body {
    font-family: Arial;
    text-align: center;
    margin-top: 40px;
  }
  #wheelCanvas {
    width: 360px;
    height: 360px;
    transition: transform 4s cubic-bezier(.15,.9,.05,1);
  }
  #arrow {
    width: 0;
    height: 0;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-bottom: 35px solid red;
    margin: 0 auto -10px auto;
  }
  #result {
    margin-top: 20px;
    font-size: 22px;
    font-weight: bold;
  }
</style>
</head>
<body>

<h2>ğŸ¯ ëœë¤ ë£°ë ›</h2>

<div id="arrow"></div>
<canvas id="wheelCanvas" width="360" height="360"></canvas>
<br>
<button id="spinBtn">ë£°ë › ëŒë¦¬ê¸°</button>
<div id="result"></div>

<script>
const canvas = document.getElementById("wheelCanvas");
const ctx = canvas.getContext("2d");
const resultBox = document.getElementById("result");
const spinBtn = document.getElementById("spinBtn");

// 8ê°œ ì‚¬ì´íŠ¸
const slices = [
  { label: 'êµ¬ê¸€', url: 'https://www.google.com/?hl=ko' },
  { label: 'ë„¤ì´ë²„', url: 'https://www.naver.com/' },
  { label: 'ì‹¹ìŠ¤ë¦¬', url: 'https://namu.wiki/w/%EC%8B%B9%EC%93%B0%EB%A6%AC' },
  { label: 'ì±—', url: 'https://chatgpt.com/' },
  { label: 'ì„¸ëª…ì»´ê³ ', url: 'https://namu.wiki/w/%EC%84%B8%EB%AA%85%EC%BB%B4%ED%93%A8%ED%84%B0%EA%B3%A0%EB%93%B1%ED%95%99%EA%B5%90' },
  { label: 'ì»´ì‹œê°„ì•Œë¦¬ë¯¸', url: 'http://www.xn--s39aj90b0nb2xw6xh.kr/' },
  { label: 'ë¡œì¼“', url: 'https://www.rocketpunch.com/' },
  { label: 'ìˆ˜í•™', url: 'https://namu.wiki/w/%EC%88%98%ED%95%99' }
];

const totalSlices = slices.length;
const anglePer = 360 / totalSlices;

// ğŸ¨ ë£°ë › ê·¸ë¦¬ê¸° (highlightëŠ” ë‹¹ì²¨ ì¹¸ index)
function drawWheel(highlight = -1) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  slices.forEach((s, i) => {
    const start = (Math.PI * 2 * i) / totalSlices;
    const end = start + (Math.PI * 2 / totalSlices);

    ctx.beginPath();
    ctx.moveTo(180, 180);
    ctx.arc(180, 180, 180, start, end);

    // ë‹¹ì²¨ ì¹¸ì€ ë¹¨ê°„ìƒ‰
    if (i === highlight) {
      ctx.fillStyle = "#ff3b3b";
    } else {
      ctx.fillStyle = i % 2 === 0 ? "#8ad0ff" : "#ffd28a";
    }

    ctx.fill();

    // í…ìŠ¤íŠ¸
    ctx.save();
    ctx.translate(180, 180);
    ctx.rotate(start + (end - start) / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#000";
    ctx.font = "bold 15px Arial";
    ctx.fillText(s.label, 160, 5);
    ctx.restore();
  });
}

drawWheel();

// ğŸ² í´ë¦­í•˜ë©´ íšŒì „
spinBtn.onclick = () => {
  resultBox.textContent = "";

  const spins = 5 + Math.random() * 5;   // 5~10ë°”í€´
  const randomAngle = Math.random() * 360;
  const totalAngle = spins * 360 + randomAngle;

  canvas.style.transition = "transform 4s cubic-bezier(.15,.9,.05,1)";
  canvas.style.transform = `rotate(${totalAngle}deg)`;

  canvas.addEventListener("transitionend", function te() {
    canvas.removeEventListener("transitionend", te);

    // ğŸ¯ 12ì‹œ í™”ì‚´í‘œ ê¸°ì¤€ ë‹¹ì²¨ index ê³„ì‚°
    let landedIndex = totalSlices - Math.floor((totalAngle % 360) / anglePer);
    landedIndex %= totalSlices;

    const chosen = slices[landedIndex];

    // ë‹¹ì²¨ ì¹¸ ë¹¨ê°„ìƒ‰ í‘œì‹œ
    canvas.style.transition = "none";
    canvas.style.transform = `rotate(${(totalAngle % 360)}deg)`;
    drawWheel(landedIndex);

    resultBox.textContent = `âœ” ë‹¹ì²¨: ${chosen.label}`;

    // 3ì´ˆ ë’¤ ì‚¬ì´íŠ¸ ì´ë™
    setTimeout(() => {
      window.location.href = chosen.url;
    }, 3000);
  });
};
</script>

</body>
</html>
